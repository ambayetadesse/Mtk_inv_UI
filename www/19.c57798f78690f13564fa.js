(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"/6mc":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n("HDdC"),c=n("cxbk"),i=n("/GcI"),r=n("XEKg"),a=n("5Jak"),s=n("fXoL"),l=n("tk/3"),d=function(){function e(e){this.http=e,this.APIURL=c.a.apiURL}return e.prototype.create=function(e){return this.http.post(this.APIURL+"/vendors",e)},e.prototype.getAllVendor=function(){return this.http.get(this.APIURL+"/vendors")},e.prototype.getVendorById=function(e){return this.http.get(this.APIURL+"/vendors",e)},e.prototype.updateVendor=function(e){return this.http.put(this.APIURL+"/vendors",e)},e.prototype.addSupplier=function(e){return this.http.get(this.APIURL+"/vendors",e)},e.prototype.removeVendor=function(e){return this.http.delete(this.APIURL+"/vendors/"+e)},e.prototype.handleError=function(e){return o.a.throw(400===e.status?new r.a(e.json()):404===e.status?new a.a:new i.a(e))},e.\u0275fac=function(t){return new(t||e)(s.kc(l.a))},e.\u0275prov=s.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"7mbe":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n("HDdC"),c=(n("S7rW"),n("4XzM"),n("EUDy"),n("Drjo"),n("XEKg")),i=n("5Jak"),r=n("/GcI"),a=n("cxbk"),s=n("fXoL"),l=n("tk/3"),d=function(){function e(e){this.http=e,this.APIURL=a.a.apiURL}return e.prototype.create=function(e){return this.http.post(this.APIURL+"/vocher",e).catch(this.handleError)},e.prototype.getVoucherVendorId=function(){return this.http.get(this.APIURL+"/vocher")},e.prototype.getAllVocher=function(){return this.http.get(this.APIURL+"/vocher")},e.prototype.updateVocher=function(e){return this.http.put(this.APIURL+"/vocher",e).catch(this.handleError)},e.prototype.addVocher=function(e){return this.http.post(this.APIURL+"/vocher",e).catch(this.handleError)},e.prototype.removeVocher=function(e){return this.http.delete(this.APIURL+"/vocher/"+e).catch(this.handleError)},e.prototype.handleError=function(e){return o.a.throw(400===e.status?new c.a(e.json()):404===e.status?new i.a:new r.a(e))},e.\u0275fac=function(t){return new(t||e)(s.kc(l.a))},e.\u0275prov=s.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},uMZz:function(e,t,n){"use strict";n.r(t),n.d(t,"PaySupplierPageModule",function(){return M});var o=n("ofXK"),c=n("3Pt+"),i=n("/ZIY"),r=n("PVOt"),a=n("4Ewp"),s=n("ZzPI"),l=n("Gkpw"),d=n("WYlB"),u=n("TEn/"),h=n("tyNb"),p=n("mrSG"),f=n("fXoL"),m=n("/6mc"),g=n("7mbe"),b=n("6t9p"),v=["pageTop"];function y(e,t){if(1&e&&(f.dc(0,"div"),f.dc(1,"div",32),f.dc(2,"div"),f.Oc(3),f.cc(),f.cc(),f.cc()),2&e){var n=t.$implicit;f.Mb(3),f.Sc(" ",n.vendorName," \xa0\xa0",n.contact," \xa0\xa0",n.phonenumber," ")}}function w(e,t){1&e&&(f.dc(0,"small",33),f.Oc(1," This field is required! "),f.cc())}var x=function(){return["id","vendorName","contact","phonenumber","address"]},I=function(e,t){return{"location-visible":e,"location-hidden":t}},S=[{path:"",component:function(){function e(e,t,n,o){this.fb=e,this.vonderService=t,this.alertController=n,this.voucherService=o,this.regform=this.fb.group({}),this.checkedItems=[],this.currentDate=(new Date).toISOString(),this.selectedDate=(new Date).toISOString(),this.minDate=(new Date).toISOString(),this.maxDate=(new Date).toISOString(),this.selectedRows=[],this.selectedItemKeys=[],this.showScroll=!1,this.fields={text:"vendorName",value:"vendorName"},this.watermark2="Select Vendor",this.height="250px";var c=new Date;c.setDate(c.getDate()-5),this.minDate=c.toISOString(),(c=new Date).setDate(c.getDate()+5),this.maxDate=c.toISOString(),this.allMode="allPages",this.checkBoxesMode="onClick"}return e.prototype.pageScroller=function(){this.pageTop.scrollToTop()},e.prototype.ngOnInit=function(){this.regform=this.fb.group({vendor:["",c.s.required],payment:["",c.s.required],date:["",c.s.required],updateBalance:0}),this.getAllCustomerList()},e.prototype.getDisplayExpr=function(e){return e?e.vendorName+" "+e.phonenumber:""},e.prototype.getAllCustomerList=function(){return Object(p.a)(this,void 0,void 0,function(){var e=this;return Object(p.c)(this,function(t){return this.vonderService.getAllVendor().subscribe(function(t){return Object(p.a)(e,void 0,void 0,function(){var e,n=this;return Object(p.c)(this,function(o){switch(o.label){case 0:return[4,t.length];case 1:return o.sent()>0?(e=this,[4,t]):[3,3];case 2:return e.listOfVonder=o.sent(),this.defaultSelectedCurrency=this.listOfVonder[0].id,this.voucherService.getAllVocher().subscribe(function(e){return Object(p.a)(n,void 0,void 0,function(){var t,n=this;return Object(p.c)(this,function(o){switch(o.label){case 0:return t=this,[4,e.filter(function(e){return e.vendorId==n.defaultSelectedCurrency&&"Unpaid"==e.paymentStatus})];case 1:return t.listOfVoucher=o.sent(),[2]}})})}),[3,4];case 3:this.AlertInternet(),o.label=4;case 4:return[2]}})})}),[2]})})},e.prototype.onChange=function(e){var t=this;this.checkedItems.includes(e)?this.checkedItems=this.checkedItems.filter(function(t){return t!=e}):this.checkedItems.push(e),this.payment=0,this.checkedItems.forEach(function(e){t.payment=+t.payment+e.subTotal})},e.prototype.selectionChangedHandler=function(e){var t=this;this.checkedItems=[];var n=e.selectedRowsData;this.checkedItems.includes(n)?this.checkedItems=this.checkedItems.filter(function(e){return e!=n}):(this.checkedItems.push(n),this.selectedRows.push(e.selectedRowKeys)),this.payment=0,this.PaidBalance=0,this.checkedItems.forEach(function(e){e.forEach(function(e){t.payment=+t.payment+e.subTotal,t.PaidBalance=t.payment,t.remaining=t.totalBalance-t.PaidBalance})})},e.prototype.payAllBalance=function(){var e=this;this.listOfVoucher.forEach(function(t){e.payment=+e.payment+t.subTotal,e.PaidBalance=e.payment,e.remaining=e.totalBalance-e.PaidBalance})},e.prototype.selectionChangedRow=function(e){this.selectedItemKeys=e.selectedRowKeys},e.prototype.onKey=function(){this.Balance=this.updateBalance+this.totalBalance-this.regform.get("payment").value},e.prototype.SelectedValue=function(e){var t=this;this.id=e.value||e.previousValue,this.filterVendor=this.listOfVonder.filter(function(e){return e.id==t.id}),this.selectedVendorBalance=this.filterVendor[0].balance,this.checkedItems.splice(0),this.payment=0,this.remaining=0,this.updateBalance=this.selectedVendorBalance,this.getVoucherByVendorId(this.defaultSelectedCurrency)},e.prototype.getVoucherByVendorId=function(e){var t=this;this.totalBalance=0,this.balance=0,this.listOfVoucherVendor=this.voucherService.getAllVocher().subscribe(function(n){t.listOfVoucher=n.filter(function(t){return t.vendorId==e&&"Unpaid"==t.paymentStatus}),null!=n?t.balance=t.updateBalance:t.listOfVoucher.forEach(function(e){t.totalBalance=+t.totalBalance+e.subTotal,t.balance=t.totalBalance+t.updateBalance})})},e.prototype.reCalculateBalance=function(){var e=this;if(this.regform.valid){if(!this.recieveBalanceId){var t={vendorName:this.filterVendor[0].vendorName,email:this.filterVendor[0].email,phonenumber:this.filterVendor[0].phonenumber,contact:this.filterVendor[0].contact,balance:(this.updateBalance-this.payment).toString(),address:this.filterVendor[0].address,website:this.filterVendor[0].website};this.checkedItems.forEach(function(t){t.forEach(function(t){e.voucherService.updateVocher({id:t.id,vocherId:t.vocherId,subTotal:t.subTotal,taxAmount:t.taxAmount,grandTotal:t.grandTotal,date:t.date,vocherTypeId:t.vocherTypeId,vendor:t.vendor,userId:t.userId,PaymentStatus:"paid"}).subscribe(function(){console.log("update success"),e.getAllCustomerList()})})}),this.vonderService.updateVendor(t).subscribe(function(){return console.log("Update success")})}this.regform.reset(),this.recieveBalanceId="",this.presentAlert(" Sucess")}else this.presentAlert("Please enter all fields")},e.prototype.scroll=function(e){this.showScroll=e.detail.scrollTop>300},e.prototype.presentAlert=function(e){return Object(p.a)(this,void 0,void 0,function(){return Object(p.c)(this,function(t){switch(t.label){case 0:return[4,this.alertController.create({cssClass:"my-custom-class",header:"pay Supplier",message:e,buttons:["OK"]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}})})},e.prototype.AlertInternet=function(){return Object(p.a)(this,void 0,void 0,function(){return Object(p.c)(this,function(e){switch(e.label){case 0:return[4,this.alertController.create({cssClass:"my-custom-class",header:"Internet",message:"Please turn on wifi or data",buttons:["OK"]})];case 1:return[4,e.sent().present()];case 2:return e.sent(),[2]}})})},e.\u0275fac=function(t){return new(t||e)(f.Yb(c.c),f.Yb(m.a),f.Yb(u.a),f.Yb(g.a))},e.\u0275cmp=f.Sb({type:e,selectors:[["app-pay-supplier"]],viewQuery:function(e,t){var n;1&e&&f.Tc(v,1),2&e&&f.Dc(n=f.pc())&&(t.pageTop=n.first)},decls:55,vars:37,consts:[[3,"translucent"],["color","primary"],["slot","start"],["scrollEvents","true",3,"ionScroll"],["pageTop",""],[3,"formGroup"],["lines","full"],[1,"dx-field"],["valueExpr","id","placeholder","Select Items","formControlName","vendor","itemTemplate","listOfVonder",3,"items","searchExpr","displayExpr","ngModel","onValueChanged","ngModelChange"],["title","Select vendors"],[4,"dxTemplate","dxTemplateOf"],["formControlName","updateBalance","readonly","",3,"ngModel","value","ngModelChange"],["displayFormat","MM/DD/YYYY","formControlName","date",3,"min","max","ngModel","ngModelChange"],["position","floating"],["type","number","formControlName","payment","aria-placeholder","Enter payment",3,"ngModel","ngModelChange","keyup"],["class","form-text text-muted",4,"ngIf"],[2,"text-align","center","margin","auto"],["id","add items",3,"disabled","click"],["slot","start","name","add-circle-outline"],["text","Clear Selection",3,"disabled","onClick"],["id","grid-container","keyExpr","id",3,"dataSource","showRowLines","remoteOperations","columnAutoWidth","showBorders","selectedRowKeys","onSelectionChanged","selectedRowKeysChange"],["grid",""],["mode","multiple",3,"selectAllMode","showCheckBoxesMode"],[3,"pageSize"],["dataField","vocherId","caption","vocherId",3,"width"],["dataField","date","height","80%","width","100px"],["dataField","grandTotal",3,"width"],["dataField","subTotal",3,"width"],["expand","block",3,"disabled","click"],["horizontal","end","vertical","bottom","slot","fixed",3,"ngClass"],["color","light",3,"click"],["md","chevron-up-outline","ios","chevron-up-circle-outline"],[1,"custom-item"],[1,"form-text","text-muted"]],template:function(e,t){if(1&e){var n=f.ec();f.dc(0,"ion-header",0),f.dc(1,"ion-toolbar",1),f.dc(2,"ion-buttons",2),f.Zb(3,"ion-menu-button"),f.cc(),f.dc(4,"ion-title"),f.Oc(5,"Pay Supplier"),f.cc(),f.cc(),f.cc(),f.dc(6,"ion-content",3,4),f.oc("ionScroll",function(e){return t.scroll(e)}),f.dc(8,"form",5),f.dc(9,"ion-item",6),f.dc(10,"ion-label"),f.Oc(11," Select Vendor"),f.cc(),f.dc(12,"div",7),f.dc(13,"dx-lookup",8),f.oc("onValueChanged",function(e){return t.SelectedValue(e)})("ngModelChange",function(e){return t.defaultSelectedCurrency=e}),f.Zb(14,"dxo-drop-down-options",9),f.Mc(15,y,4,3,"div",10),f.cc(),f.cc(),f.cc(),f.dc(16,"ion-item"),f.dc(17,"ion-label"),f.Oc(18,"Balance "),f.cc(),f.dc(19,"ion-input",11),f.oc("ngModelChange",function(e){return t.updateBalance=e}),f.cc(),f.cc(),f.dc(20,"ion-item"),f.dc(21,"ion-label"),f.Oc(22,"Date Paid"),f.cc(),f.dc(23,"ion-datetime",12),f.oc("ngModelChange",function(e){return t.currentDate=e}),f.cc(),f.cc(),f.dc(24,"ion-item"),f.dc(25,"ion-label",13),f.Oc(26,"Payment "),f.cc(),f.dc(27,"ion-input",14),f.oc("ngModelChange",function(e){return t.payment=e})("keyup",function(){return t.onKey()}),f.cc(),f.Mc(28,w,2,0,"small",15),f.cc(),f.dc(29,"div",16),f.dc(30,"ion-button",17),f.oc("click",function(){return t.reCalculateBalance()}),f.Zb(31,"ion-icon",18),f.Oc(32,"Calculate Balance "),f.cc(),f.cc(),f.cc(),f.dc(33,"dx-button",19),f.oc("onClick",function(){return f.Fc(n),f.Ec(35).instance.clearSelection()}),f.cc(),f.dc(34,"dx-data-grid",20,21),f.oc("onSelectionChanged",function(e){return t.selectionChangedRow(e)})("selectedRowKeysChange",function(e){return t.selectedRows=e})("onSelectionChanged",function(e){return t.selectionChangedHandler(e)}),f.Zb(36,"dxo-selection",22),f.Zb(37,"dxo-paging",23),f.Zb(38,"dxi-column",24),f.Zb(39,"dxi-column",25),f.Zb(40,"dxi-column",26),f.Zb(41,"dxi-column",27),f.cc(),f.dc(42,"ion-item"),f.dc(43,"ion-label"),f.Oc(44,"Remining"),f.cc(),f.Oc(45),f.cc(),f.dc(46,"ion-item"),f.dc(47,"ion-label"),f.Oc(48,"Total Paid"),f.cc(),f.Oc(49),f.cc(),f.dc(50,"ion-button",28),f.oc("click",function(){return t.payAllBalance()}),f.Oc(51,"Pay Balance"),f.cc(),f.dc(52,"ion-fab",29),f.dc(53,"ion-fab-button",30),f.oc("click",function(){return t.pageScroller()}),f.Zb(54,"ion-icon",31),f.cc(),f.cc(),f.cc()}2&e&&(f.wc("translucent",!0),f.Mb(8),f.wc("formGroup",t.regform),f.Mb(5),f.wc("items",t.listOfVonder)("searchExpr",f.zc(33,x))("displayExpr",t.getDisplayExpr)("ngModel",t.defaultSelectedCurrency),f.Mb(2),f.wc("dxTemplateOf","listOfVonder"),f.Mb(4),f.xc("value",t.updateBalance),f.wc("ngModel",t.updateBalance),f.Mb(4),f.wc("min",t.minDate)("max",t.maxDate)("ngModel",t.currentDate),f.Mb(4),f.wc("ngModel",t.payment),f.Mb(1),f.wc("ngIf",!t.regform.get("payment").valid&&t.regform.get("payment").touched),f.Mb(2),f.wc("disabled",!t.regform.valid),f.Mb(3),f.wc("disabled",!(null!=t.selectedRows&&t.selectedRows.length)),f.Mb(1),f.wc("dataSource",t.listOfVoucher)("showRowLines",!0)("remoteOperations",!0)("columnAutoWidth",!0)("showBorders",!0)("showRowLines",!0)("selectedRowKeys",t.selectedRows),f.Mb(2),f.wc("selectAllMode",t.allMode)("showCheckBoxesMode",t.checkBoxesMode),f.Mb(1),f.wc("pageSize",10),f.Mb(1),f.wc("width",90),f.Mb(2),f.wc("width",80),f.Mb(1),f.wc("width",80),f.Mb(4),f.Qc(" ",t.remaining," "),f.Mb(4),f.Qc(" ",t.PaidBalance," "),f.Mb(1),f.wc("disabled",t.payment>=1),f.Mb(2),f.wc("ngClass",f.Bc(34,I,t.showScroll,!t.showScroll)))},directives:[u.s,u.V,u.f,u.E,u.U,u.m,c.t,c.l,c.f,u.w,u.A,i.a,c.k,c.d,b.nc,r.e,u.v,u.hb,u.n,u.gb,u.bb,o.l,u.e,u.t,d.a,s.a,b.ne,b.Qd,b.k,u.o,o.j,u.p],styles:["ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding:0;--border-radius:14px}.location-visible[_ngcontent-%COMP%]{opacity:1;transition:.5s}.location-hidden[_ngcontent-%COMP%]{opacity:0;transition:.5s}  .field-customization{min-height:32px}  .dx-lookup.field-customization .dx-lookup-field{padding:0 5px}  .custom-field>img{vertical-align:middle;height:30px;width:21px}  .custom-field>div{display:inline-block;vertical-align:middle;line-height:30px;font-size:14px;margin-left:5px}  .custom-item>img{height:48px;width:38px;margin-right:10px}  .custom-item>div{display:inline-block;vertical-align:top;line-height:48px;font-size:15px}  .dx-viewport:not(.dx-theme-ios7) .dx-fieldset{width:40%;float:left}  .dx-field>.dx-lookup{flex:1}.table[_ngcontent-%COMP%]{border-radius:6px;background-color:#e9ecef}"]}),e}()}],C=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.Wb({type:e}),e.\u0275inj=f.Vb({imports:[[h.j.forChild(S)],h.j]}),e}(),M=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.Wb({type:e}),e.\u0275inj=f.Vb({imports:[[o.b,c.g,u.W,c.q,i.b,r.g,C,a.b,s.b,l.b,d.b]]}),e}()}}]);