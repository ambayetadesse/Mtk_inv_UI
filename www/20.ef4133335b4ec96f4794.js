(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{SfWY:function(t,e,r){"use strict";r.r(e),r.d(e,"CatagoryPageModule",function(){return k});var n=r("ofXK"),o=r("3Pt+"),c=r("TEn/"),i=r("tyNb"),a=r("mrSG"),s=r("gcOT"),u=r("5Jak"),l=r("fXoL"),f=r("jgFG"),g=["filePicker"];function h(t,e){1&t&&(l.dc(0,"small",16),l.Oc(1," This field is required! "),l.cc())}function d(t,e){if(1&t){var r=l.ec();l.dc(0,"ion-img",17),l.oc("click",function(){return l.Fc(r),l.qc().onPickImage()}),l.cc()}if(2&t){var n=l.qc();l.wc("src",n.base64textString)}}function p(t,e){if(1&t){var r=l.ec();l.dc(0,"ion-button",18),l.oc("click",function(){return l.Fc(r),l.qc().onPickImage()}),l.Zb(1,"ion-icon",19),l.dc(2,"ion-label"),l.Oc(3,"Take Picture"),l.cc(),l.cc()}}function m(t,e){if(1&t){var r=l.ec();l.dc(0,"input",20,21),l.oc("change",function(t){return l.Fc(r),l.qc().onFileChosen(t)}),l.cc()}}function b(t,e){if(1&t){var r=l.ec();l.dc(0,"ion-item-sliding",null,22),l.dc(2,"ion-item",23),l.dc(3,"ion-thumbnail",2),l.Zb(4,"img",24),l.cc(),l.dc(5,"ion-label"),l.Oc(6),l.cc(),l.cc(),l.dc(7,"ion-item-options",25),l.dc(8,"ion-item-option",26),l.oc("click",function(){l.Fc(r);var t=e.$implicit,n=l.Ec(1);return l.qc().Edit(t,n)}),l.Zb(9,"ion-icon",27),l.cc(),l.dc(10,"ion-item-option",26),l.oc("click",function(){l.Fc(r);var t=e.$implicit,n=l.Ec(1);return l.qc().delete(t,n)}),l.Zb(11,"ion-icon",28),l.cc(),l.cc(),l.cc()}if(2&t){var n=e.$implicit;l.Mb(4),l.wc("src",n.picture,l.Hc),l.Mb(2),l.Qc(" ",n.name,"")}}var y=[{path:"",component:function(){function t(t,e,r,n){this.fb=t,this.platform=e,this.CategoryService=r,this.alertController=n,this.usePicker=!1,this.regform=this.fb.group({}),this.editMode=!1}return t.prototype.ngOnInit=function(){this.regform=this.fb.group({name:["",o.s.required],picture:[""],remark:[""]}),this.getCategory(),(this.platform.is("mobile")&&!this.platform.is("hybrid")||this.platform.is("desktop"))&&(this.usePicker=!0)},t.prototype.getCategory=function(){var t=this;try{this.CategoryService.getAllLookUpCategory().subscribe(function(e){return Object(a.a)(t,void 0,void 0,function(){var t,r;return Object(a.c)(this,function(n){switch(n.label){case 0:return e.length>0?(t=this,[4,e]):[3,3];case 1:return t.ListOfCategory=n.sent(),r=this,[4,e];case 2:return r.filteredCategory=n.sent(),[3,4];case 3:this.AlertInternet(),n.label=4;case 4:return[2]}})})})}catch(e){console.log(e)}},t.prototype.AlertInternet=function(){return Object(a.a)(this,void 0,void 0,function(){return Object(a.c)(this,function(t){switch(t.label){case 0:return[4,this.alertController.create({cssClass:"my-custom-class",header:"Internet",message:"Please turn on wifi or data",buttons:["OK"]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}})})},t.prototype.onPickImage=function(){var t=this;1!=this.usePicker?s.c.Camera.getPhoto({quality:50,source:s.b.Prompt,correctOrientation:!0,height:320,width:300,resultType:s.a.Base64}).then(function(e){t.base64textString="data:image/png;base64,"+e.base64String}).catch(function(e){return console.log(e),t.usePicker&&t.filePickerRef.nativeElement.click(),!1}):this.filePickerRef.nativeElement.click()},t.prototype.onFileChosen=function(t){var e=this,r=t.target.files[0];if(r){var n=new FileReader;n.onload=function(){var t=n.result.toString();e.base64textString=t},n.readAsDataURL(r)}},t.prototype.filter=function(t){this.filteredCategory=t.target.value?this.ListOfCategory.filter(function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}):this.ListOfCategory},t.prototype.Save=function(){var t=this;if(this.regform.get("picture").setValue(this.base64textString),this.regform.valid){if(this.CatagoryId){var e={id:this.CatagoryId,name:this.regform.get("name").value,picture:this.base64textString,remark:this.regform.get("remark").value};this.CategoryService.updateCategory(e).subscribe(function(){return t.getCategory()})}else this.CategoryService.create(this.regform.value).subscribe(function(){return t.getCategory()});this.presentAlert(),this.base64textString="",this.regform.reset(),this.CatagoryId=null,this.getCategory()}else this.ErrorAlert()},t.prototype.delete=function(t,e){this.presentAlertConfirm(t).then(function(){return function(t){if(!(t instanceof u.a))throw t;alert("This post has already been deleted.")}}),e.close()},t.prototype.presentAlertConfirm=function(t){return Object(a.a)(this,void 0,void 0,function(){var e=this;return Object(a.c)(this,function(r){switch(r.label){case 0:return[4,this.alertController.create({header:"Confirm!",message:"<strong>Are you sure you want delete?</strong>",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(t){console.log("Confirm Cancel: blah")}},{text:"OK",handler:function(){e.CategoryService.removeCategory(t.id).subscribe(function(t){console.log(t),e.getCategory()},function(t){console.log(t)}),e.regform.reset(),e.CatagoryId=null}}]})];case 1:return[4,r.sent().present()];case 2:return r.sent(),[2]}})})},t.prototype.ErrorAlert=function(){return Object(a.a)(this,void 0,void 0,function(){return Object(a.c)(this,function(t){switch(t.label){case 0:return[4,this.alertController.create({cssClass:"my-custom-class",header:"Error",message:"Please Enter All field.",buttons:["OK"]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}})})},t.prototype.presentAlert=function(){return Object(a.a)(this,void 0,void 0,function(){return Object(a.c)(this,function(t){switch(t.label){case 0:return[4,this.alertController.create({cssClass:"my-custom-class",header:"Catagory",message:"Catagory Saved successfully.",buttons:["OK"]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}})})},t.prototype.Edit=function(t,e){this.editMode=!0,this.CatagoryId=t.id,this.regform.get("name").setValue(t.name),this.regform.get("remark").setValue(t.remark),this.base64textString=t.picture,e.close()},t.\u0275fac=function(e){return new(e||t)(l.Yb(o.c),l.Yb(c.cb),l.Yb(f.a),l.Yb(c.a))},t.\u0275cmp=l.Sb({type:t,selectors:[["app-catagory"]],viewQuery:function(t,e){var r;1&t&&l.Tc(g,1),2&t&&l.Dc(r=l.pc())&&(e.filePickerRef=r.first)},decls:25,vars:8,consts:[[3,"translucent"],["color","primary"],["slot","start"],[3,"formGroup"],[2,"color","rgb(63, 5, 170)"],["formControlName","name"],["class","form-text text-muted",4,"ngIf"],[1,"picker"],["role","button","class","image",3,"src","click",4,"ngIf"],["color","primary",3,"click",4,"ngIf"],["hidden","","type","file","accept","image/jpeg",3,"change",4,"ngIf"],[2,"text-align","center","margin","auto"],["id","add items",3,"click"],["slot","start","name","add-circle-outline"],["showCancelButton","never",3,"keyup"],[4,"ngFor","ngForOf"],[1,"form-text","text-muted"],["role","button",1,"image",3,"src","click"],["color","primary",3,"click"],["name","camera","slot","start"],["hidden","","type","file","accept","image/jpeg",3,"change"],["filePicker",""],["slidingItem",""],["detail",""],[3,"src"],["side","start"],["color","danger",3,"click"],["name","create","slot","icon-only"],["name","trash","slot","icon-only"]],template:function(t,e){1&t&&(l.dc(0,"ion-header",0),l.dc(1,"ion-toolbar",1),l.dc(2,"ion-buttons",2),l.Zb(3,"ion-menu-button"),l.cc(),l.dc(4,"ion-title"),l.Oc(5,"Lookup Catagory"),l.cc(),l.cc(),l.cc(),l.dc(6,"ion-content"),l.dc(7,"form",3),l.dc(8,"ion-list"),l.dc(9,"ion-item"),l.dc(10,"ion-label",4),l.Oc(11,"Name"),l.cc(),l.Zb(12,"ion-input",5),l.Mc(13,h,2,0,"small",6),l.cc(),l.dc(14,"div",7),l.Mc(15,d,1,1,"ion-img",8),l.Mc(16,p,4,0,"ion-button",9),l.cc(),l.Mc(17,m,2,0,"input",10),l.dc(18,"div",11),l.dc(19,"ion-button",12),l.oc("click",function(){return e.Save()}),l.Zb(20,"ion-icon",13),l.Oc(21),l.cc(),l.cc(),l.cc(),l.cc(),l.dc(22,"ion-searchbar",14),l.oc("keyup",function(t){return e.filter(t)}),l.cc(),l.dc(23,"ion-list"),l.Mc(24,b,12,2,"ion-item-sliding",15),l.cc(),l.cc()),2&t&&(l.wc("translucent",!0),l.Mb(7),l.wc("formGroup",e.regform),l.Mb(6),l.wc("ngIf",!e.regform.get("name").valid&&e.regform.get("name").touched),l.Mb(2),l.wc("ngIf",e.base64textString),l.Mb(1),l.wc("ngIf",!e.base64textString),l.Mb(1),l.wc("ngIf",e.usePicker),l.Mb(4),l.Qc(" ",e.editMode?"Update Catagory":"Add Catagory",""),l.Mb(3),l.wc("ngForOf",e.filteredCategory))},directives:[c.s,c.V,c.f,c.E,c.U,c.m,o.t,o.l,o.f,c.B,c.w,c.A,c.v,c.hb,o.k,o.d,n.l,c.e,c.t,c.M,n.k,c.u,c.z,c.T,c.y,c.x],styles:["ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding:0;--border-radius:14px}ion-content[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{--border-radius:14px;--background:#f3f3f3;margin-top:-13px}.picker[_ngcontent-%COMP%]{width:30rem;max-width:80%;height:20rem;max-height:30vh;border:1px solid var(--ion-color-primary);margin:auto;display:flex;justify-content:center;align-items:center}.image[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.alert-custom[_ngcontent-%COMP%]{color:#99004d;background-color:#f169b4;border-color:#800040}"]}),t}()}],C=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Wb({type:t}),t.\u0275inj=l.Vb({imports:[[i.j.forChild(y)],i.j]}),t}(),v=r("cZdB"),k=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Wb({type:t}),t.\u0275inj=l.Vb({imports:[[n.b,o.g,c.W,o.q,C,v.b]]}),t}()},jgFG:function(t,e,r){"use strict";r.d(e,"a",function(){return l});var n=r("HDdC"),o=r("cxbk"),c=r("/GcI"),i=r("XEKg"),a=r("5Jak"),s=r("fXoL"),u=r("tk/3"),l=function(){function t(t){this.http=t,this.APIURL=o.a.apiURL}return t.prototype.create=function(t){return this.http.post(this.APIURL+"/lookupcatagory",t)},t.prototype.getAllLookUpCategory=function(){return this.http.get(this.APIURL+"/lookupcatagory")},t.prototype.getCategory=function(t){return this.http.get(this.APIURL+"/lookupcatagory"+t)},t.prototype.updateCategory=function(t){return this.http.put(this.APIURL+"/lookupcatagory",t).catch(this.handleError)},t.prototype.addCategory=function(t){return this.http.post(this.APIURL+"/lookupcatagory",t).catch(this.handleError)},t.prototype.removeCategory=function(t){return this.http.delete(this.APIURL+"/lookupcatagory/"+t).catch(this.handleError)},t.prototype.handleError=function(t){return n.a.throw(400===t.status?new i.a(t.json()):404===t.status?new a.a:new c.a(t))},t.\u0275fac=function(e){return new(e||t)(s.kc(u.a))},t.\u0275prov=s.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);