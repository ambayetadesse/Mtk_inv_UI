(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{tVnk:function(e,t,n){"use strict";n.r(t),n.d(t,"UserRolePageModule",function(){return y});var i=n("ofXK"),r=n("3Pt+"),o=n("TEn/"),c=n("/ZIY"),s=n("PVOt"),l=n("4Ewp"),u=n("tyNb"),a=n("mrSG"),d=n("OSLH"),f=n("tJmT"),h=n("fXoL"),p=n("O1Io"),m=n("Gtwf"),b=n("OWjg");function g(e,t){if(1&e&&(h.dc(0,"ion-select-option",10),h.Oc(1),h.cc()),2&e){var n=t.$implicit;h.xc("value",null==n?null:n.id),h.Mb(1),h.Qc(" ",null==n?null:n.username," ")}}var v=[{path:"",component:function(){function e(e,t,n,i,r,o){this.fb=e,this.userRoleService=t,this.userService=n,this.functionalityService=i,this.platform=r,this.alertController=o,this.regform=this.fb.group({}),this.isChecked=!0,this.funwithuser=[],this.CheckedProject=[],this.NewWithOldArray=[],this.selectAllModeVlaue="page",this.selectionModeValue="all",this.arr_names=new Array,this.deleteRoleId=[],this.usePicker=!1}return e.prototype.ngOnInit=function(){this.regform=this.fb.group({funId:[""],userId:["",r.s.required],remark:[""]}),(this.platform.is("mobile")&&!this.platform.is("hybrid")||this.platform.is("desktop"))&&(this.usePicker=!0),this.getUser(),this.getFunctionality()},e.prototype.selectedEv=function(e){var t=this,n=e.target.value;this.userRoleService.getAllUserRole().subscribe(function(e){t.listOfUserRole=e.filter(function(e){return e.userId==+n}),t.CheckedProject=[],t.arr_names=[],t.deleteRoleId=[],t.listOfUserRole.forEach(function(e){t.arr_names.push(e.funId),t.deleteRoleId.push(e),t.NewWithOldArray.push(e.funId);var n={compName:t.listOfFun.find(function(t){return t.id==+e.funId}).compName,description:t.listOfFun.find(function(t){return t.id==+e.funId}).description,id:t.listOfFun.find(function(t){return t.id==+e.funId}).id,remark:t.listOfFun.find(function(t){return t.id==+e.funId}).remark};t.CheckedProject.push(n)})})},e.prototype.save=function(){var e=this;if(this.regform.valid){if(this.CheckedProject.length>0){this.deleteRoleId.forEach(function(t){e.userRoleService.deleteUserRole(t.id).subscribe(function(e){console.log(e)})});var t=this.regform.get("userId").value;this.CheckedProject.forEach(function(n){e.userRoleService.create({funId:n.id,userId:+t,remark:""}).subscribe(function(e){console.log(e.toString())})})}this.presentAlert()}},e.prototype.presentAlert=function(){return Object(a.a)(this,void 0,void 0,function(){return Object(a.c)(this,function(e){switch(e.label){case 0:return[4,this.alertController.create({header:"Confirm! ",message:"Successfully Inserted!!",buttons:["OK"]})];case 1:return[4,e.sent().present()];case 2:return e.sent(),[2]}})})},e.prototype.getUser=function(){var e=this;this.userService.getAllUser().subscribe(function(t){return Object(a.a)(e,void 0,void 0,function(){var e,n;return Object(a.c)(this,function(i){switch(i.label){case 0:return e=this,[4,t];case 1:return e.listOfUser=i.sent(),n=this,[4,t[0].empId];case 2:return n.selectedUser=i.sent(),[2]}})})})},e.prototype.getFunctionality=function(){var e=this;this.functionalityService.getAllFunctionality().subscribe(function(t){return Object(a.a)(e,void 0,void 0,function(){var e;return Object(a.c)(this,function(n){switch(n.label){case 0:return e=this,[4,t];case 1:return e.listOfFun=n.sent(),this.listOfFunctinality=new d.a({store:new f.a({key:"id",data:t})}),[2]}})})})},e.prototype.onSelectionChanged=function(e){var t=this,n=e.removedItems;e.addedItems.forEach(function(e){null==t.CheckedProject.find(function(t){return t.id==e.id})&&t.CheckedProject.push({compName:e.compName,description:e.description,id:e.id,remark:e.remark})}),n.length>0&&n.forEach(function(e){var n=t.CheckedProject.findIndex(function(t){return t.id==e.id});t.CheckedProject.splice(n,1)})},e.prototype.onSelectAllValueChanged=function(e){},e.\u0275fac=function(t){return new(t||e)(h.Yb(r.c),h.Yb(p.a),h.Yb(m.a),h.Yb(b.a),h.Yb(o.cb),h.Yb(o.a))},e.\u0275cmp=h.Sb({type:e,selectors:[["app-user-role"]],decls:19,vars:9,consts:[[3,"translucent"],["color","primary"],["slot","start"],[3,"formGroup"],["name","userId","formControlName","userId","interface","popover",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"widget-container"],["displayExpr","compName",3,"dataSource","height","selectionMode","selectAllMode","showSelectionControls","selectedItemKeys","onSelectionChanged","onSelectAllValueChanged"],["list",""],["expand","block",1,"btn","btn-secondary",3,"click"],[3,"value"]],template:function(e,t){1&e&&(h.dc(0,"ion-header",0),h.dc(1,"ion-toolbar",1),h.dc(2,"ion-buttons",2),h.Zb(3,"ion-menu-button"),h.cc(),h.dc(4,"ion-title"),h.Oc(5,"User Role"),h.cc(),h.cc(),h.cc(),h.dc(6,"ion-content"),h.dc(7,"form",3),h.dc(8,"ion-list"),h.dc(9,"ion-item"),h.dc(10,"ion-label"),h.Oc(11,"User Name "),h.cc(),h.dc(12,"ion-select",4),h.oc("ionChange",function(e){return t.selectedEv(e)}),h.Mc(13,g,2,2,"ion-select-option",5),h.cc(),h.cc(),h.dc(14,"div",6),h.dc(15,"dx-list",7,8),h.oc("onSelectionChanged",function(e){return t.onSelectionChanged(e)})("onSelectAllValueChanged",function(e){return t.onSelectAllValueChanged(e)}),h.cc(),h.cc(),h.dc(17,"ion-button",9),h.oc("click",function(){return t.save()}),h.Oc(18," Save "),h.cc(),h.cc(),h.cc(),h.cc()),2&e&&(h.wc("translucent",!0),h.Mb(7),h.wc("formGroup",t.regform),h.Mb(6),h.wc("ngForOf",t.listOfUser),h.Mb(2),h.wc("dataSource",t.listOfFunctinality)("height",400)("selectionMode",t.selectionModeValue)("selectAllMode",t.selectAllModeVlaue)("showSelectionControls",!0)("selectedItemKeys",t.arr_names))},directives:[o.s,o.V,o.f,o.E,o.U,o.m,r.t,r.l,r.f,o.B,o.w,o.A,o.P,o.gb,r.k,r.d,i.k,l.a,o.e,o.Q],styles:["ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding:0;--border-radius:14px}"]}),e}()}],O=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Wb({type:e}),e.\u0275inj=h.Vb({imports:[[u.j.forChild(v)],u.j]}),e}(),y=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Wb({type:e}),e.\u0275inj=h.Vb({imports:[[i.b,r.g,o.W,r.q,O,c.b,s.g,l.b]]}),e}()}}]);